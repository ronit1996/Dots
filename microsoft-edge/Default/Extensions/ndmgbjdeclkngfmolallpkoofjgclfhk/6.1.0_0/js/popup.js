/*! For license information please see popup.js.LICENSE.txt */
!function(e){function t(t){for(var o,a,d=t[0],l=t[1],r=t[2],u=0,E=[];u<d.length;u++)a=d[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&E.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(c&&c(t);E.length;)E.shift()();return s.push.apply(s,r||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,d=1;d<n.length;d++){var l=n[d];0!==i[l]&&(o=!1)}o&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={6:0,4:0,5:0},s=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var d=window.webpackJsonp=window.webpackJsonp||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var r=0;r<d.length;r++)t(d[r]);var c=l;s.push([25,0]),n()}({1:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return d}));const o={PARTY_JOINED:"PARTY_JOINED",NEXT_EPISODE:"NEXT_EPISODE",NEXT_EPISODE_PLAYBACK:"NEXT_EPISODE_PLAYBACK",USER_JOINED:"USER_JOINED",USER_LEFT:"USER_LEFT",INITIALIZE:"INITIALIZE",CREATE_PARTY:"CREATE_PARTY",SESSION_CREATED:"SESSION_CREATED",EXIT_PARTY:"EXIT_PARTY",PLAY:"PLAY",PAUSE:"PAUSE",SEEK:"SEEK",PAUSE_PLAYBACK:"PAUSE_PLAYBACK",RESUME_PLAYBACK:"RESUME_PLAYBACK",SEEK_PLAYBACK:"SEEK_PLAYBACK",TOGGLE_CHAT:"TOGGLE_CHAT",CHAT_MESSAGE:"CHAT_MESSAGE",PLAYER_STATE:"PLAYER_STATE",UPDATE_USER:"UPDATE_USER",USER_UPDATED:"USER_UPDATED",EMOJI:"EMOJI",ERROR:"ERROR",USER_EXIT:"USER_EXIT",INPUT_EMOJI:"INPUT_EMOJI",REJOIN_PARTY:"REJOIN_PARTY",UPDATE_META:"UPDATE_META",USER_CALL_STARTED:"USER_CALL_STARTED",USER_CALL_REQUEST:"USER_CALL_REQUEST",USER_CALL_ACK:"USER_CALL_ACK",USER_CALL_JOINED:"USER_CALL_JOINED",USER_CALL_END:"USER_CALL_END",USER_CALL_UNMUTE:"USER_CALL_UNMUTE",USER_CALL_MUTE:"USER_CALL_MUTE",VOICE_CALL_STARTED:"VOICE_CALL_STARTED",PRE_INITIALIZE:"PRE_INITIALIZE"},i=.03,s=[o.PLAY,o.PAUSE,o.PAUSE_PLAYBACK,o.RESUME_PLAYBACK],a={E0:{key:"E0",details:"Not able to find video, Please try again!"},E1:{key:"E1",details:"Looks like you are trying to join invalid Session"},E2:{key:"E2",details:"Video not loaded. Please try again!"}},d={NETFLIX:"netflix",PRIME_VIDEO:"primevideo",HOTSTAR:"hotstar",YOUTUBE:"youtube",CRUNCHY_ROLL:"crunchyroll",DRIVE:"drive",WATCHFLIX:"WATCHFLIX"}},14:function(e,t){var n,o,i,s,a,d;n=window,o=document,i="script",s="ga",n.GoogleAnalyticsObject=s,n.ga=n.ga||function(){(n.ga.q=n.ga.q||[]).push(arguments)},n.ga.l=1*new Date,a=o.createElement(i),d=o.getElementsByTagName(i)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",d.parentNode.insertBefore(a,d),ga("create","UA-167980632-1","auto"),ga("set","checkProtocolTask",null)},25:function(e,t,n){n(14),e.exports=n(26)},26:function(e,t,n){"use strict";n.r(t);var o=n(10),i=n(1),s=n(13);const a={},d={tab:null,contentScriptExecuted:0,announcements:[],extension:null};function l({eventAction:e,eventLabel:t}){ga("send","event",Object(o.b)(d.tab.url),e,t)}function r(e,t){const n=new URL(e);return new URLSearchParams(n.search.slice(1)).getAll(t)}const c={getDOMNode:e=>(a[e]||(a[e]=document.querySelector(e)),a[e]),addEvent(e,t,n){this.getDOMNode(e).addEventListener(t,n)},disableButton(){this.getDOMNode("button.create-session").disabled=!0,this.getDOMNode(".session-loader").classList.remove("hidden")},showExiting(){this.getDOMNode(".exit-party .session-loader").classList.remove("hidden"),this.getDOMNode(".exit-party").disabled=!0,this.getDOMNode(".copy-url").disabled=!0},enableButton(){var e,t;null===(e=this.getDOMNode(".exit-party .session-loader"))||void 0===e||e.classList.add("hidden"),null===(t=this.getDOMNode(".create-session .session-loader"))||void 0===t||t.classList.add("hidden"),this.getDOMNode("button.create-session").disabled=!1,this.getDOMNode(".joined-party").disabled=!1,this.getDOMNode(".exit-party").disabled=!1,this.getDOMNode(".copy-url").disabled=!1},showCreatingSession(){this.disableButton();return{nickname:this.getDOMNode(".nickname input").value.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#x2F"),saveForFuture:this.getDOMNode(".remember").checked,live:this.getDOMNode(".live").checked}},getSessionUrl:(e,t)=>Object(o.c)(d.tab.url,e,t),copyUrl(){this.getDOMNode(".copy-url").classList.add("btn-primary-green"),this.getDOMNode(".copy-url").innerHTML="Copied",setTimeout(()=>{this.getDOMNode(".copy-url").classList.remove("btn-primary-green"),this.getDOMNode(".copy-url").innerHTML="Copy Url"},1e3)},showCopySession({wpId:e,showChat:t,urlId:n}){this.getDOMNode("button.create-session").classList.add("hidden"),this.getDOMNode(".avatar").classList.add("hidden"),this.getDOMNode(".live-box").classList.add("hidden"),this.getDOMNode(".joined-party").classList.remove("hidden"),this.getDOMNode(".link").classList.remove("hidden"),this.getDOMNode(".link textarea").value=this.getSessionUrl(e,n),this.getDOMNode(".showChat").checked=t},showContent({nickname:e}){this.getDOMNode(".loader").classList.add("hidden"),this.getDOMNode(".link").classList.add("hidden"),this.getDOMNode(".content").classList.remove("hidden"),this.getDOMNode(".session-loader").classList.add("hidden"),e&&(this.getDOMNode(".nickname input").value=e,this.getDOMNode(".remember").checked=!0)},showCreateParty(){this.enableButton(),this.getDOMNode("button.create-session").classList.remove("hidden"),this.getDOMNode(".avatar").classList.remove("hidden"),this.getDOMNode(".live-box").classList.remove("hidden"),this.getDOMNode(".joined-party").classList.add("hidden"),this.getDOMNode(".link").classList.add("hidden"),this.getDOMNode(".session-loader").classList.add("hidden")},showError(e){this.getDOMNode(".error-detail").innerHTML=function(e){var t;let n;try{switch(e.key){case i.a.E0.key:n=i.a.E0.details;break;case i.a.E1.key:n=i.a.E1.details;break;default:n="Please try again when video loads"}}catch(e){n="Please try again when video loads"}return l({eventAction:i.c.ERROR,eventLabel:JSON.stringify((null==e||null===(t=e.message)||void 0===t?void 0:t.toString())||e.toString())}),n}(e),this.getDOMNode(".error-info").classList.remove("hidden")},showAnnouncement(e){var t,n;(null==e||null===(t=e.maintenance)||void 0===t?void 0:t.show)&&(this.getDOMNode(".maintenance").style.display="flex",this.getDOMNode(".maintenance span").innerHTML=(null==e||null===(n=e.maintenance)||void 0===n?void 0:n.description)||"")},showInfo(e){var t,n;(null==e||null===(t=e.info)||void 0===t?void 0:t.show)&&(this.getDOMNode(".info-2").style.display="flex",this.getDOMNode(".info-2 span").innerHTML=(null==e||null===(n=e.info)||void 0===n?void 0:n.description)||"")},updatedExtension(e){(null==e?void 0:e.disable)&&(this.getDOMNode(".create-session").disabled=!0,this.getDOMNode(".create-session").innerHTML="This too shall pass")}};function u(e,t,n){const{tab:o}=d;c.disableButton(),chrome.tabs.sendMessage(o.id,{type:e,data:t},(function(e){var t,o;if(c.enableButton(),!(null===(t=chrome)||void 0===t||null===(o=t.runtime)||void 0===o?void 0:o.lastError)){var s;if(null==e?void 0:e.err)return(null==e||null===(s=e.err)||void 0===s?void 0:s.key)===i.a.E1.key&&c.showContent({nickname:(null==e?void 0:e.nickname)||""}),void c.showError(null==e?void 0:e.err);n&&n(e)}}))}function E(e,t,n=(()=>{})){const{tab:a,contentScriptExecuted:l}=d;l||[i.b.CRUNCHY_ROLL,i.b.DRIVE].includes(Object(o.b)(a.url))?u(e,t,n):new s.a(a.id).executeScripts("js/vendors.js","js/shared.js","js/common.js","js/content.js").then(()=>{d.contentScriptExecuted=1,u(e,t,n)})}const h={saveConfig(e){chrome.storage.local.set({config:JSON.stringify(e)})},getConfig(e){chrome.storage.local.get(["config"],(function(t){e(t.config||"{}")}))}};var v={globalEvent:function(){c.addEvent("button.copy-url","click",()=>{var e;l({eventAction:"COPY_URL",eventLabel:null===(e=r(c.getDOMNode(".link textarea").value,"wpId"))||void 0===e?void 0:e[0]}),Object(o.a)(c.getDOMNode(".link textarea").value),c.copyUrl()}),c.addEvent(".icon-info","click",()=>{c.getDOMNode(".live-info").classList.remove("hidden")}),c.addEvent(".info-close","click",()=>{c.getDOMNode(".live-info").classList.add("hidden")}),c.addEvent(".error-close","click",()=>{c.getDOMNode(".error-info").classList.add("hidden")}),c.addEvent("button.exit-party","click",()=>{E(i.c.EXIT_PARTY,{},e=>{var t;l({eventAction:i.c.EXIT_PARTY,eventLabel:null==e||null===(t=e.data)||void 0===t?void 0:t.session_id}),c.showCreateParty()}),c.showExiting()}),c.addEvent("button.create-session","click",()=>{const{nickname:e,saveForFuture:t,live:n}=c.showCreatingSession();E(i.c.CREATE_PARTY,{nickname:e,saveForFuture:t,live:n},({data:e})=>{l({eventAction:i.c.CREATE_PARTY,eventLabel:null==e?void 0:e.session_id}),c.showCopySession({wpId:null==e?void 0:e.session_id,urlId:null==e?void 0:e.url_id,showChat:null==e?void 0:e.showChat})})}),c.addEvent(".showChat","click",e=>{l({eventAction:i.c.TOGGLE_CHAT,eventLabel:e.target.checked}),E(i.c.TOGGLE_CHAT,{showChat:e.target.checked})})}};!function({chrome:e}){e.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];!function({tab:e}){d.tab=e}({tab:t});const n=r(t.url,"wpId")[0];v.globalEvent(),E(i.c.INITIALIZE,{wpId:n},({data:e})=>{h.getConfig(e=>{const t=JSON.parse(e);c.showAnnouncement(null==t?void 0:t.announcements),c.showInfo(null==t?void 0:t.announcements),c.updatedExtension(null==t?void 0:t.extension),fetch("https://config.watchflix.group/production/latest.json").then(e=>e.json()).then(e=>{(null==t?void 0:t.hash)!==e.hash&&(h.saveConfig(e),c.showAnnouncement(null==e?void 0:e.announcements),c.showInfo(null==e?void 0:e.announcements),c.updatedExtension(null==e?void 0:e.extension))})}),c.showContent({nickname:null==e?void 0:e.nickname,canjoin:null==e?void 0:e.canjoin}),(null==e?void 0:e.session_id)&&c.showCopySession({wpId:n||(null==e?void 0:e.session_id),showChat:null==e?void 0:e.showChat,urlId:null==e?void 0:e.url_id})})}))}(window)}});